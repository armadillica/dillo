| {% extends "dillo/base.pug" %}
| {% load i18n %}
| {% load thumbnail %}

| {% block page_title %}{% trans 'Animation Reels' %} {% trans 'on' %} {% endblock page_title %}

| {% block content %}
.container-fluid
  .nav-tabbar
    | {% block stream_nav_items %}
    | {% include 'dillo/reels/_navigation_reel.pug' %}
    | {% endblock stream_nav_items %}

    //- Notice for users without a reel.
    | {% if not user.profile.reel or not request.user.is_authenticated %}
    .theater-header
      | {% url 'profile_edit' as btn_reels_cta %}
      | {% include 'dillo/components/_button_generic.pug' with url=btn_reels_cta label="Add Animation Reel" class="btn-primary-strong" %}

      span #[strong #[i.i-star] Your reel could be here!]

      | {% if not request.user.is_authenticated %}
      span Create a free account to add your animation reel.
      | {% else %}
      | {% url 'profile_edit' as profile_edit_url %}
      span Fill in the #[a(href="{{ profile_edit_url }}") reel section] on your profile.
      | {% endif %}
    | {% endif %}

    | {% include 'dillo/components/_pagination.pug' with page_obj=page_obj label="reel" %}

  | {% if object_list %}
  .cards-grid
    | {% for profile in object_list %}
    .card-borderless
      | {% thumbnail profile.reel_thumbnail_16_9 "640x360" crop="center" as im %}
      a.card-thumbnail(href="{% url 'reel-detail' profile.user_id %}?{{ url_params.sort_qs }}", title="{{ profile.name }}")
        img.img-fluid(
          src="{{ im.url }}",
          width="{{ im.width }}",
          height="{{ im.height }}",
          alt="{{ profile.name }}")
      | {% endthumbnail %}
      .card-header
        .card-header-image
          | {% include 'dillo/components/_profile_avatar.pug' with user=profile.user size='small' %}
        a.card-header-text.card-header-text-column(
          href="{% url 'reel-detail' profile.user_id %}?{{ url_params.sort_qs }}")
          .card-title {{ profile.name }}
          | {% if profile.location %}
          .card-subtitle {{ profile.location }}
          | {% endif %}
    | {% endfor %}

  | {% else %}
  .post-list-empty
    | {% url 'profile_edit' as url_short_create %}
    | {% blocktrans with url_short_create=url_short_create %}
    | No reels to show yet.
    | {% endblocktrans %}
  | {% endif %}

  .theater-footer
    | {% include 'dillo/components/_pagination.pug' with page=page_obj %}

| {% endblock content %}
